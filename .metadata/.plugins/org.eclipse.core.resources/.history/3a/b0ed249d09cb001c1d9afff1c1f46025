package steps;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;

import io.cucumber.java.en.Given;
import io.cucumber.java.en.Then;
import io.cucumber.java.en.When;

public class StepDefinitions {

	WebDriver driver;
	
	public StepDefinitions(CommonSteps cs) {
		this.driver = cs.getDriver();
	}
	
	@Given("I am on Ebay Home Page")
	public void i_am_on_Ebay_Home_Page() {
		driver.navigate().to("https://www.ebay.com/");
//		//click on sign in button
//		driver.findElement(By.xpath("//span[@id='gh-ug']//a[contains(text(),'Sign in')]")).click();
//		//click on continue with google
//		driver.findElement(By.xpath("//button[@id='signin_ggl_btn']")).click();
//		//enter the mail id in the field
//		driver.findElement(By.xpath("//input[@id='identifierId']")).sendKeys("siemens.balg@gmail.com");
//		WebDriverWait wait = new WebDriverWait(driver, 10);
//		WebElement cred = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//input[@id='identifierId']")));
//		cred.sendKeys("siemens.balg@gmail.com");
//		//click next
//		driver.findElement(By.xpath("//span[normalize-space()='Next']")).click();
//		//enter password in the password field
//		driver.findElement(By.xpath("//input[@name='password']")).sendKeys("simondora@315");
//		//click next
//		driver.findElement(By.xpath("//span[normalize-space()='Next']")).click();
	}

	@When("I order a product")
	public void i_order_a_product() throws Exception {
	    //enter the mobile model in the search bar
		driver.findElement(By.xpath("//input[@id='gh-ac']")).sendKeys("redmi note 10 pro blue");
		//click the search button
		driver.findElement(By.xpath("//input[@id='gh-btn']")).click();
		//click the desired mobile
		driver.findElement(By.xpath("//h3[contains(text(),'XIAOMI REDMI NOTE 10 PRO 128GB/64GB DUAL SIM FACTO')]")).click();
		//click add to cart button
//		WebDriverWait wait = new WebDriverWait(driver, 10);
//		WebElement add = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//a[@id='isCartBtn_btn']")));
//		add.click();
		Thread.sleep(2000);
		String newTab = "https://www.ebay.com/itm/263522301811?epid=12040604502&hash=item3d5b273773:g:eaoAAOSwJrFg1437";
		driver.navigate().to(newTab);
		driver.findElement(By.xpath("//a[@id='isCartBtn_btn']")).click();
		driver.findElement(By.xpath("//button[normalize-space()='Go to checkout']")).click();
	}

	@Then("my order is placed successfully")
	public void my_order_is_placed_successfully() {
	    System.out.println("Test Done");
	}
}
